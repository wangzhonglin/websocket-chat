<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<script >
    function connect1(){
//        alert('connect1');

        var ta = document.getElementById('responseText');
        var socket = new WebSocket('ws://localhost:8888/websocket');
        if (window.WebSocket) {

        }else{
            alert('Your browser does not support Web Socket.');
            return;
        }
        socket.onopen = function(event) {
            ta.value = "Web Socket opened!";
        };

        socket.onmessage = function(event) {
            alert("返回消息:"+event.data);
        };

        socket.onclose = function(event) {
            ta.value = "Web Socket closed";
        };
    }

    function connect() {
        alert('connect 发送消息');
        var socket;
        if (!window.WebSocket) {
            window.WebSocket = window.MozWebSocket;
        }

        if (window.WebSocket) {
            socket = new WebSocket("ws://localhost:8888");
            socket.onmessage = function(event) {
                var ta = document.getElementById('responseText');
//              ta.value = event.data;
                alert("收到消息为:"+event.data);
            };

            socket.onopen = function(event) {
                var ta = document.getElementById('responseText');
                ta.value = ta.value + "Web Socket opened!";

                //socket.send('{"method":"message_send","request":{"clientId":"1432007178183","session_id":"1005","to":"6675807","message_type":0,"content":"你好app"}}');
                //socket.send('{"method":"message_send","info":{"time_stamp":"1431759012040","session_id":"1BA2EF2A423F7F83D2E978AEA609EAA1","to":"12393","message_type":0,"content":"你好"}}');
                socket.send('{"method":"getSessionList","request":{"session_id":"1BA2EF2A423F7F83D2E978AEA609EAA1","customer_id":"3001"}}');
                alert("socket.send");
            };

            socket.onclose = function(event) {
                var ta = document.getElementById('responseText');
                ta.value = ta.value + "Web Socket closed";
            };



            socket.onerror = function(event){
            };

            // s.on('message_send', function(json) {
            //        alert("接受 "+json);
            //})

        } else {
            alert("Your browser does not support Web Socket.");
        }
    }
</script>
<body>
<input type="button" onclick="connect1()" value="ws connect1"/> <br/><br/>
<input type="button" onclick="connect()" value="ws connect"/> <br/><br/>
<input id="responseText" type="text" value="123456"/>

</body>
</html>